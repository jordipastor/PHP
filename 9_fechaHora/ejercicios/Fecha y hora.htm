<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0066)http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  
  <title>Funciones de fecha y hora. PHP. Bartolomé Sintes Marco</title>
  <meta name="generator" content="amaya 8.7.2, see http://www.w3.org/Amaya/">
  <link href="./Fecha y hora_files/mclibre_php.css" rel="stylesheet" type="text/css" title="Color">
  <link href="./Fecha y hora_files/mclibre_php_bn.css" rel="alternate stylesheet" type="text/css" title="Blanco y Negro">
  <link rel="shortcut icon" href="http://www.mclibre.org/consultar/php/varios/mclibre.ico">
  <link rel="stylesheet" href="http://www.mclibre.org/consultar/php/varios/highlight-php.css">
  <script type="text/javascript" src="./Fecha y hora_files/highlight.pack.js">
  </script>
  <script type="text/javascript">
hljs.initHighlightingOnLoad();</script>
</head>

<body>
<h1><a href="http://www.mclibre.org/consultar/php/index.html"><img alt="Volver al índice" src="./Fecha y hora_files/indice.png" width="61" height="50" id="vpp" title="Volver al índice"></a>Funciones de fecha y hora</h1>

<div class="toc">
<ul>
  <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Funci">Huso horario: función
  date_default_timezone_set()</a></li>
  <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Funci1">Generar cadena con fecha y hora</a> 
    <ul>
      <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Funci11">Función date()</a></li>
      <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Funci2">Función strftime()</a></li>
    </ul>
  </li>
  <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Funci3">Fecha y hora actual: función localtime()</a></li>
  <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Funci4">Validación de fecha: función checkdate()</a></li>
  <li><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#Convertir">Convertir cadenas de fechas</a></li>
</ul>
</div>
<hr>

<h2 id="Funci">Huso horario: función date_default_timezone_set()</h2>

<p>La función <a href="http://www.php.net/manual/es/function.date-default-timezone-set.php"><span class="php-fun">date_default_timezone_set($identificador_de_zona_horaria)</span></a>
establece el huso horario que utilizan las funciones de fecha y hora. El manual
de PHP contiene la lista de <a href="http://www.php.net/manual/es/timezones.php">identificadores de zonas
horarias válidas</a>.</p>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
date_default_timezone_set(<span class="string">"Europe/Madrid"</span>);
<span class="keyword">print</span> <span class="string">"&lt;p&gt;"</span> . date(<span class="string">"Y"</span>) . <span class="string">"&lt;/p&gt;\n"</span>;
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>2007<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
  </tbody>
</table>
<hr class="corta">

<p>Cuando la directiva <span class="php-dir">error_reporting</span> tiene
establecido el valor <span class="php-con">E_STRICT</span>, PHP genera un aviso
si no se ha establecido el huso horario antes de utilizar cualquier función de
fecha y hora.</p>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
<span class="keyword">print</span> <span class="string">"&lt;p&gt;"</span> . date(<span class="string">"Y"</span>) . <span class="string">"&lt;/p&gt;\n"</span>;
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><strong>Strict Standards</strong>: date()
        [function.date]: It is not safe to rely on the system's timezone
        settings. Please use the date.timezone setting, the TZ environment
        variable or the date_default_timezone_set() function. In case you used
        any of those methods and you are still getting this warning, you most
        likely misspelled the timezone identifier. We selected 'Europe/Paris'
        for '1.0/no DST' instead in <strong>ejemplo.php</strong> on line
        <strong>2</strong> 

        <p>2007</p>
      </td>
    </tr>
  </tbody>
</table>

<p><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#">Volver al principio de la página</a></p>
<hr>

<h2 id="Funci1">Generar cadena con fecha y hora</h2>

<h3 id="Funci11">Función date()</h3>

<p>La función <a href="http://www.php.net/manual/es/function.date.php"><span class="php-fun">date($formato)</span></a> permite generar una cadena que
incluye la fecha y/o la hora del sistema. La función <span class="php-fun">date()</span> espera uno o dos argumentos. El primer argumento
define el formato de la cadena y el segundo el instante que se quiere convertir
(si no se indica el segundo argumento, la función trabaja con la fecha y hora
actual del sistema).</p>

<p>Para definir el formato de la cadena se utilizan, entre otros, los
siguientes caracteres:</p>

<table border="1">
  <tbody>
    <tr>
      <td></td>
      <th>día</th>
      <th>mes</th>
      <th>año</th>
    </tr>
    <tr>
      <th>números con ceros delante</th>
      <td>d</td>
      <td>m</td>
      <td>y (2 cifras)<br>
        Y (4 cifras)</td>
    </tr>
    <tr>
      <th>números sin ceros delante</th>
      <td>j</td>
      <td>n</td>
      <td></td>
    </tr>
    <tr>
      <th>nombre corto (3 letras)</th>
      <td>D</td>
      <td>M</td>
      <td></td>
    </tr>
    <tr>
      <th>nombre largo (completo)</th>
      <td>l</td>
      <td>F</td>
      <td></td>
    </tr>
  </tbody>
</table>

<table border="1">
  <tbody>
    <tr>
      <td></td>
      <th>hora (12h)</th>
      <th>hora (24 h)</th>
      <th>minutos</th>
      <th>segundos</th>
    </tr>
    <tr>
      <th>números con ceros delante</th>
      <td>h</td>
      <td>H</td>
      <td>i</td>
      <td>s</td>
    </tr>
    <tr>
      <th>números sin ceros delante</th>
      <td>g</td>
      <td>G</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>

<p>Además, se pueden utilizar los siguientes valores:</p>

<table border="1">
  <tbody>
    <tr>
      <td></td>
      <th>carácter</th>
    </tr>
    <tr>
      <th>fecha completa en formato RFC2822</th>
      <td>r</td>
    </tr>
    <tr>
      <th>fecha completa en formato ISO 8061</th>
      <td>c</td>
    </tr>
    <tr>
      <th>número de días total del mes actual</th>
      <td>t</td>
    </tr>
    <tr>
      <th>número del día de la semana (domingo: 7, lunes: 1, etc.)</th>
      <td>N</td>
    </tr>
    <tr>
      <th>número del día de la semana (domingo: 0, lunes: 1, etc.)</th>
      <td>w</td>
    </tr>
    <tr>
      <th>Número de día del año</th>
      <td>z</td>
    </tr>
  </tbody>
</table>

<p></p>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
date_default_timezone_set(<span class="string">"Europe/Madrid"</span>);
<span class="keyword">print</span> <span class="string">"&lt;p&gt;Ejemplo 1: "</span> . date(<span class="string">"d/m/y H:i:s"</span>) . <span class="string">"&lt;/p&gt;\n"</span>;
<span class="keyword">print</span> <span class="string">"&lt;p&gt;Ejemplo 2: "</span> . date(<span class="string">"l, F jS Y "</span>) . <span class="string">"&lt;/p&gt;\n"</span>;
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>Ejemplo 1: 03/03/05 13:43:48<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span>&gt;</span>Ejemplo 2: Thursday, March 3rd 2005<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
  </tbody>
</table>

<p><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#">Volver al principio de la página</a></p>
<hr class="corta">

<h3 id="Funci2">Función strftime()</h3>

<p>La función <a href="http://www.php.net/manual/es/function.strftime.php"><span class="php-fun">strftime($formato)</span></a> permite generar una cadena que
incluye la fecha y/o la hora del sistema en el idioma deseado. La función <span class="php-fun">strftime()</span> espera uno o dos argumentos. El primer
argumento define el formato de la cadena y el segundo el instante que se quiere
convertir (si no se indica el segundo argumento, la función trabaja con la
fecha y hora actual del sistema).</p>

<p>Para definir el formato de la cadena se utilizan, entre otros, los
siguientes caracteres:</p>

<table border="1">
  <tbody>
    <tr>
      <td></td>
      <th>día</th>
      <th>mes</th>
      <th>año</th>
    </tr>
    <tr>
      <th>números con ceros delante</th>
      <td>%d</td>
      <td>%m</td>
      <td>%y (2 cifras)<br>
        %Y (4 cifras)</td>
    </tr>
    <tr>
      <th>nombre corto (3 letras)</th>
      <td>%a</td>
      <td>%b</td>
      <td></td>
    </tr>
    <tr>
      <th>nombre largo (nombre completo)</th>
      <td>%A</td>
      <td>%B</td>
      <td></td>
    </tr>
  </tbody>
</table>

<p></p>

<table border="1">
  <tbody>
    <tr>
      <td></td>
      <th>hora (12h)</th>
      <th>hora (24 h)</th>
      <th>minutos</th>
      <th>segundos</th>
    </tr>
    <tr>
      <th>números con ceros delante</th>
      <td>%I</td>
      <td>%H</td>
      <td>%M</td>
      <td>%S</td>
    </tr>
  </tbody>
</table>

<p>Además, se pueden utilizar los siguientes valores:</p>

<table border="1">
  <tbody>
    <tr>
      <td></td>
      <th>carácter</th>
    </tr>
    <tr>
      <th>fecha y hora (dd/mm/aaaa hh:mm:ss)</th>
      <td>%c</td>
    </tr>
    <tr>
      <th>fecha (dd/mm/aaaa)</th>
      <td>%x</td>
    </tr>
    <tr>
      <th>hora (hh:mm:ss)</th>
      <td>%X</td>
    </tr>
  </tbody>
</table>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
date_default_timezone_set(<span class="string">"Europe/Madrid"</span>);
setlocale(LC_TIME, <span class="string">"spanish"</span>);
<span class="keyword">print</span> <span class="string">"&lt;p&gt;"</span> . strftime(<span class="string">"Ejemplo 1: %A, %d de %B de %Y"</span>) . <span class="string">"&lt;/p&gt;\n"</span>;
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>Ejemplo 1: jueves, 30 de abril de 2009<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
  </tbody>
</table>

<p><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#">Volver al principio de la página</a></p>
<hr>

<h2 id="Funci3">Fecha y hora actual: función localtime()</h2>

<p>La funcion <a href="http://www.php.net/manual/es/function.localtime.php" class="php-fun">localtime()</a> devuelve una matriz con información detallada
de la fecha y hora actual. Para que devuelva esa información de la hora actual,
se pasa como argumento la función time(). El segundo argumento indica si la
matriz tiene índices asociativos.</p>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
<span class="variable">$fecha_actual</span> = localtime(time(), <span class="number">1</span>);
<span class="variable">$anyo_actual</span>  = <span class="variable">$fecha_actual</span>[<span class="string">"tm_year"</span>] + <span class="number">1900</span>;
<span class="variable">$mes_actual</span>   = <span class="variable">$fecha_actual</span>[<span class="string">"tm_mon"</span>] + <span class="number">1</span>;
<span class="variable">$dia_actual</span>   = <span class="variable">$fecha_actual</span>[<span class="string">"tm_mday"</span>];
<span class="keyword">print</span> <span class="string">"&lt;p&gt;Hoy es el $dia_actual/$mes_actual/$anyo_actual.&lt;/p&gt;"</span>; 
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>Hoy es el 10/3/2005.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
  </tbody>
</table>

<p><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#">Volver al principio de la página</a></p>
<hr>

<h2 id="Funci4">Validación de fecha: función checkdate()</h2>

<p>La función <a href="http://www.php.net/manual/es/function.checkdate.php"><span class="php-fun">checkdate($mes, $dia, $anyo)</span></a> devuelve el valor <span class="php-con">true</span> si la fecha enviada es correcta en el calendario
Gregoriano y <span class="php-con">false</span> si no lo es.</p>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
<span class="variable">$dia</span>  = <span class="number">29</span>;
<span class="variable">$mes</span>  = <span class="number">2</span>;
<span class="variable">$anyo</span> = <span class="number">2008</span>;
<span class="keyword">if</span> (checkdate(<span class="variable">$mes</span>, <span class="variable">$dia</span>, <span class="variable">$anyo</span>)) {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo existe.&lt;/p&gt;\n"</span>;
} <span class="keyword">else</span> {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo no existe.&lt;/p&gt;\n"</span>;
}
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>El día 29/2/2008 existe.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
<span class="variable">$dia</span>  = <span class="number">29</span>;
<span class="variable">$mes</span>  = <span class="number">2</span>;
<span class="variable">$anyo</span> = <span class="number">2007</span>;
<span class="keyword">if</span> (checkdate(<span class="variable">$mes</span>, <span class="variable">$dia</span>, <span class="variable">$anyo</span>)) {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo existe.&lt;/p&gt;\n"</span>;
} <span class="keyword">else</span> {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo no existe.&lt;/p&gt;\n"</span>;
}
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>El día 29/2/2007 no existe.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
  </tbody>
</table>
<hr class="corta">

<p>Hay que tener en cuenta que el <a href="http://es.wikipedia.org/wiki/Calendario_gregoriano">calendario
Gregoriano</a> se estableció (en algunos países) a partir del 15 de octubre de
1582, por lo que no tiene sentido aplicar esta función a fechas anteriores a
esa fecha. Por ejemplo, la función <span class="php-fun">checkdate()</span> no
tiene en cuenta que hay unos días (del 5 al 14 de octubre de 1582) que no
existieron en el calendario Gregoriano. Por otra parte, si el año es negativo o
cero, la función <span class="php-fun">checkdate()</span> devuelve siempre
<span class="php-con">false</span>.</p>

<table class="ejemplo">
  <tbody>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
<span class="variable">$dia</span>  = <span class="number">12</span>;
<span class="variable">$mes</span>  = <span class="number">10</span>;
<span class="variable">$anyo</span> = <span class="number">1582</span>;
<span class="keyword">if</span> (checkdate(<span class="variable">$mes</span>, <span class="variable">$dia</span>, <span class="variable">$anyo</span>)) {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo existe.&lt;/p&gt;\n"</span>;
} <span class="keyword">else</span> {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo no existe.&lt;/p&gt;\n"</span>;
}
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>El día 12/10/1582 existe.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
    <tr>
      <td class="codphp"><pre><code class="language-php"><span class="preprocessor">&lt;?php</span>
<span class="variable">$dia</span>  = <span class="number">1</span>;
<span class="variable">$mes</span>  = <span class="number">1</span>;
<span class="variable">$anyo</span> = <span class="number">0</span>;
<span class="keyword">if</span> (checkdate(<span class="variable">$mes</span>, <span class="variable">$dia</span>, <span class="variable">$anyo</span>)) {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo existe.&lt;/p&gt;\n"</span>;
} <span class="keyword">else</span> {
    <span class="keyword">print</span> <span class="string">"&lt;p&gt;El día $dia/$mes/$anyo no existe.&lt;/p&gt;\n"</span>;
}
<span class="preprocessor">?&gt;</span></code></pre>
      </td>
      <td class="resul-html"><pre><code class="language-html xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span>El día 1/1/0 no existe.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></code></pre>
      </td>
    </tr>
  </tbody>
</table>

<p><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#">Volver al principio de la página</a></p>
<hr>

<h2 id="Convertir">Convertir cadenas de fechas</h2>

<p>Para convertir las cadenas de fechas del formato dd-mm-aaaa al formato
aaaa-mm-dd y viceversa se pueden definir estas funciones:</p>

<div class="codphp">
<pre><code class="language-php"><span class="function"><span class="keyword">function</span> <span class="title">fechaDma</span><span class="params">(<span class="variable">$amd</span>)</span>
{</span>
    <span class="keyword">return</span> substr(<span class="variable">$amd</span>, <span class="number">8</span>, <span class="number">2</span>) . <span class="string">"-"</span> . substr(<span class="variable">$amd</span>, <span class="number">5</span>, <span class="number">2</span>) . <span class="string">"-"</span> . substr(<span class="variable">$amd</span>, <span class="number">0</span>, <span class="number">4</span>);
}

<span class="function"><span class="keyword">function</span> <span class="title">fechaAmd</span><span class="params">(<span class="variable">$dma</span>)</span>
{</span>
    <span class="keyword">return</span> substr(<span class="variable">$dma</span>, <span class="number">7</span>, <span class="number">4</span>) . <span class="string">"-"</span> . substr(<span class="variable">$dma</span>, <span class="number">4</span>, <span class="number">2</span>) . <span class="string">"-"</span> . substr(<span class="variable">$dma</span>, <span class="number">1</span>, <span class="number">2</span>);
}</code></pre>
</div>

<p><a href="http://www.mclibre.org/consultar/php/lecciones/php_fecha_hora.html#">Volver al principio de la página</a></p>
<address>
  Esta página forma parte del curso "Páginas web con PHP" disponible en <a href="http://www.mclibre.org/">http://www.mclibre.org</a><br>
  Autor: Bartolomé Sintes Marco<br>
  Última modificación de esta página: 28 de abril de 2010 
</address>

<p class="licencia"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/es/"><img alt="Creative Commons License" style="border-width:0" src="./Fecha y hora_files/88x31.png"></a> <br>
Esta obra está bajo una <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/es/">licencia de Creative
Commons Reconocimiento-CompartirIgual 3.0 España</a>.</p>


</body></html>